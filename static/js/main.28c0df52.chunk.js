(this["webpackJsonpclass-32-solution-todo"]=this["webpackJsonpclass-32-solution-todo"]||[]).push([[0],{293:function(e,t){},295:function(e,t){},309:function(e,t){},311:function(e,t){},339:function(e,t){},341:function(e,t){},342:function(e,t){},347:function(e,t){},349:function(e,t){},355:function(e,t){},357:function(e,t){},376:function(e,t){},388:function(e,t){},391:function(e,t){},436:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){},439:function(e,t,n){"use strict";n.r(t);var c=n(49),a=n(50),i=n(54),s=n(53),r=n(0),o=n.n(r),l=n(18),u=n.n(l),j=n(15),d=n(2),b=o.a.createContext();var p=function(e){var t=Object(r.useState)(3),n=Object(j.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)("difficulty"),s=Object(j.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)("light"),p=Object(j.a)(u,2),O=p[0],m=p[1],f=Object(r.useState)(!1),h=Object(j.a)(f,2),x=h[0],g=h[1],v={displayCompletedItems:x,itemsPerPage:c,defaultSort:o,mode:O,setItemsPerPage:a,setDefaultSort:l,setMode:m,setDisplayCompletedItems:g,saveSettings:function(){var e={displayCompletedItems:x,defaultSort:o,itemsPerPage:c,mode:O};localStorage.setItem("displaySettings",JSON.stringify(e))}};return Object(r.useEffect)((function(){!function(){try{var e=localStorage.getItem("displaySettings");e=JSON.parse(e),g(e.displayCompletedItems),a(e.itemsPerPage),l(e.defaultSort),m(e.mode)}catch(t){console.error(t.messege)}}()}),[]),Object(d.jsx)(b.Provider,{value:v,children:e.children})},O=n(108),m=n.n(O),f=n(200),h=n(201),x=n.n(h),g=n(64),v=n.n(g),S=n(202),y=n.n(S),C=o.a.createContext(),P=Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SECRET||"wheeloftime",I=Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"https://bearer-auth-practice.herokuapp.com";console.log(P,I);var T=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)({}),s=Object(j.a)(i,2),o=s[0],l=s[1],u=function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("".concat(I,"/signin"),{},{auth:{username:t.username,password:t.password}});case 3:n=e.sent,a(!0),l(n.data.user),v.a.save("auth",n.data.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=v.a.load("auth")||null;try{var t=y.a.verify(e,P);l(t),a(!0)}catch(n){console.error("Invalid Token")}}),[]);var b={isLoggedIn:c,user:o,login:u,logout:function(){v.a.remove("auth"),a(!1)},can:function(e){var t;return null===o||void 0===o||null===(t=o.capabilities)||void 0===t?void 0:t.includes(e)}};return Object(d.jsx)(C.Provider,{value:b,children:e.children})},N=n(208),D=n(51),E=n(40),_=function(e){var t=Object(r.useState)({}),n=Object(j.a)(t,2),c=n[0],a=n[1];return{handleChange:function(e){e.persist(),a((function(t){return Object(E.a)(Object(E.a)({},t),{},Object(D.a)({},e.target.name,e.target.value))})),console.log(c)},handleSubmit:function(t){t&&t.preventDefault(),e(Object(E.a)({},c))},values:c}},k=n(444);var A=function(e){var t=_((function(t){t.id=Object(k.a)(),t.complete=!1,e.addItem(t)})),n=t.handleChange,c=t.handleSubmit;return Object(d.jsxs)("form",{onSubmit:c,children:[Object(d.jsx)("h2",{children:"Add To Do Item"}),Object(d.jsxs)("label",{children:[Object(d.jsx)("span",{children:"To Do Item"}),Object(d.jsx)("input",{className:"bp3-input",onChange:n,name:"text",type:"text",placeholder:"Item Details"})]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("span",{children:"Assigned To"}),Object(d.jsx)("input",{className:"bp3-input",onChange:n,name:"assignee",type:"text",placeholder:"Assignee Name"})]}),Object(d.jsxs)("label",{className:"bp3-label",children:[Object(d.jsx)("span",{className:"bp3-text",children:"Difficulty"}),Object(d.jsx)("input",{className:"bp3-slider",onChange:n,defaultValue:3,type:"range",min:1,max:5,name:"difficulty"})]}),Object(d.jsx)("label",{children:Object(d.jsx)("button",{className:"bp3-button bp3-intent-primary",type:"submit",children:"Add Item"})})]})},L=n(443),R=n(32),w=n(55),H=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.context.isLoggedIn,t=!this.props.capability||this.context.can(this.props.capability),n=e&&t;return Object(d.jsx)(w.d,{condition:n,children:this.props.children})}}]),n}(o.a.Component);H.contextType=C;var J=H;var U=function(e){var t=Object(r.useContext)(b),n=Object(r.useState)([]),c=Object(j.a)(n,2),a=c[0],i=c[1],s=e.currentPage*t.itemsPerPage,o=s-t.itemsPerPage,l=e.list.slice(o,s);return Object(r.useEffect)((function(){i(l)}),[e.list,e.currentPage]),Object(d.jsx)("div",{className:"toDoList",children:a.map((function(t,n){return Object(d.jsx)(L.b,{elevation:R.a.THREE,children:Object(d.jsxs)("div",{id:n,children:[Object(d.jsxs)("div",{className:"title",children:[Object(d.jsx)("span",{className:"bp3-tag bp3-round ".concat(t.complete?"bp3-intent-danger":"bp3-intent-success"),onClick:function(){return e.toggleComplete(t.id)},children:t.complete?"Complete":"In Progress"}),Object(d.jsx)("p",{children:Object(d.jsxs)("small",{children:["Assigned to: ",t.assignee]})}),Object(d.jsx)(J,{capability:"delete",children:Object(d.jsx)(L.e,{icon:"cross",onClick:function(){return e.deleteItem(t.id)}})})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("p",{children:t.text}),Object(d.jsx)("p",{className:"difficulty",children:Object(d.jsxs)("small",{children:["Difficulty: ",t.difficulty]})})]},t.id)})}))})};var W=function(e){for(var t=[],n=1;n<=Math.ceil(e.totalItems/e.itemsPerPage);n++)t.push(n);return Object(d.jsx)("div",{className:"pagination",children:t.map((function(t){return Object(d.jsx)("button",{className:"bp3-button bp3-intent-secondary bp3-elevation-1",onClick:function(){return e.paginate(t)},children:t})}))})},K=function(){var e=Object(r.useContext)(b),t=Object(r.useContext)(C),n=Object(r.useState)([]),c=Object(j.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),o=Object(j.a)(s,2),l=o[0],u=o[1],p=Object(r.useState)(1),O=Object(j.a)(p,2),m=O[0],f=O[1],h=Object(r.useState)([]),x=Object(j.a)(h,2),g=x[0],v=x[1];function S(){if(localStorage.getItem("list")){var e=localStorage.getItem("list"),t=JSON.parse(e);i(t)}}return Object(r.useEffect)((function(){S()}),[]),Object(r.useEffect)((function(){a.sort((function(t,n){return t[e.defaultSort]-n[e.defaultSort]}));var t=a.filter((function(e){return!e.complete})).length;u(t),document.title="To Do List: ".concat(t),function(){if(!e.displayCompletedItems){var t=a.filter((function(t){return t.complete===e.displayCompletedItems}));return v(t)}v(a)}()}),[a]),Object(d.jsxs)("main",{children:[Object(d.jsx)("header",{children:Object(d.jsxs)("h1",{children:["To Do List: ",l," items pending"]})}),Object(d.jsxs)("section",{children:[Object(d.jsx)(J,{capability:"create",children:Object(d.jsx)(A,{addItem:function(e){localStorage.setItem("list",JSON.stringify([].concat(Object(N.a)(a),[e]))),S()},list:a})}),Object(d.jsx)(U,{list:g,currentPage:m,toggleComplete:function(e){if(t.user.capabilities.includes("update")){var n=a.map((function(t){return t.id==e&&(t.complete=!t.complete),t}));localStorage.setItem("list",JSON.stringify(n)),S()}},deleteItem:function(e){var t=a.filter((function(t){return t.id!==e}));localStorage.setItem("list",JSON.stringify(t)),S()}})]}),Object(d.jsx)(W,{itemsPerPage:e.itemsPerPage,totalItems:g.length,paginate:function(e){return f(e)}})]})},B=n(65),F=n(1);var M=function(e){var t=Object(r.useState)({}),n=Object(j.a)(t,2),c=n[0],a=n[1],i=Object(r.useContext)(C),s=function(e){a(Object(E.a)(Object(E.a)({},c),{},Object(D.a)({},e.target.name,e.target.value)))};return Object(d.jsxs)(w.b,{condition:i.isLoggedIn,children:[Object(d.jsxs)(w.c,{children:["Welcome ",i.user.username,Object(d.jsx)(L.a,{onClick:i.logout,children:"Log Out"})]}),Object(d.jsx)(w.a,{children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i.login(c)},children:[Object(d.jsx)("input",{className:F.a.INPUT,name:"username",onChange:s,placeholder:"Username"}),Object(d.jsx)("input",{className:F.a.INPUT,name:"password",type:"password",onChange:s,placeholder:"Password"}),Object(d.jsx)(L.a,{type:"submit",children:"Log In"})]})})]})};var V=function(e){return Object(d.jsxs)("nav",{children:[Object(d.jsx)(B.b,{id:"link",to:"/todo-app/home",children:"Home"}),Object(d.jsx)(B.b,{id:"link",to:"/todo-app/styles",children:"Styles"}),Object(d.jsx)("div",{className:"login",children:Object(d.jsx)(M,{})})]})};var G=function(){return Object(d.jsx)("footer",{children:Object(d.jsx)("a",{href:"https://github.com/Twin-2/todo-app",children:"GitHub Link"})})};var q=function(){var e=Object(r.useContext)(b),t=function(t){switch(t.target.name){case"itemsPerPage":e.setItemsPerPage(t.target.value);case"defaultSort":e.setDefaultSort(t.target.value)}};return Object(d.jsxs)(L.c,{inline:!1,children:[Object(d.jsx)("label",{children:"Items Per Page"}),Object(d.jsx)("input",{name:"itemsPerPage",type:"number",value:e.itemsPerPage,onChange:t}),Object(d.jsx)("span",{children:"Default Sort"}),Object(d.jsxs)(L.d,{name:"defaultSort",value:e.defaultSort,onChange:t,children:[Object(d.jsx)("option",{value:"assignee",children:"Assignee"}),Object(d.jsx)("option",{value:"complete",children:"Complete"}),Object(d.jsx)("option",{value:"text",children:"Text"}),Object(d.jsx)("option",{value:"difficulty",children:"Difficulty"})]}),Object(d.jsx)("span",{children:"Display Completed?"}),Object(d.jsx)(L.f,{name:"displayCompleted",checked:e.displayCompletedItems,onChange:function(t){var n=!e.displayCompletedItems;e.setDisplayCompletedItems(n)}}),Object(d.jsx)("span",{children:"Dark Mode "}),Object(d.jsx)(L.f,{disabled:!0,label:"Coming soon!",name:"mode"}),Object(d.jsx)(L.a,{onClick:function(t){t.preventDefault(),e.saveSettings()},children:"Submit"})]})},z=n(13),Q=(n(436),n(437),n(438),function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(d.jsx)(p,{children:Object(d.jsx)(T,{children:Object(d.jsxs)(B.a,{children:[Object(d.jsx)(V,{}),Object(d.jsx)(J,{capabilities:"read",children:Object(d.jsxs)(z.c,{children:[Object(d.jsx)(z.a,{exact:!0,path:"/todo-app/home",children:Object(d.jsx)(K,{})}),Object(d.jsx)(z.a,{exact:!0,path:"/todo-app/styles",children:Object(d.jsx)(q,{})})]})}),Object(d.jsx)(G,{})]})})})}}]),n}(o.a.Component)),X=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(d.jsx)(Q,{})}}]),n}(o.a.Component),Y=document.getElementById("root");u.a.render(Object(d.jsx)(X,{}),Y)}},[[439,1,2]]]);
//# sourceMappingURL=main.28c0df52.chunk.js.map